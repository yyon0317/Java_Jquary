<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax 1 : 개념정리</title>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
</head>
<body>
    <script>
        
        //서버 : 유저가 데이터달라고 요청을 하면 데이터를 보내주는 간단한 프로그램
        //서버에 데이터를 요청할 때는
        //1. 어떤 데이터인지 url로 잘 기재해야하고
        //2. 어떤 방법으로 요청할지 결정해야 (GET/POST 등)

        //GET요청은 서버에 있던 데이터를 읽고싶을 때 주로 사용 (브라우저 주소창)
        //POST요청은 서버로 데이터를 보내고 싶을 때 사용 (<form action="요청할url" method="post"> 태그 이용)
        //GET, POST 요청을 저렇게 날리면 단점이 뭐냐면 브라우저가 새로고침 됨

        //AJAX란? 
        //서버에 GET, POST 요청을 할 때 새로고침 없이 데이터를 주고받는

        //jQuery로 AJAX요청하기 
        //$.get() 라는 함수를 쓰고 안에 url만 잘 기입

        // https://codingapple1.github.io/hello.txt 여기로 GET요청

        //.done 아니면 .then 뒤에 붙이고 콜백함수넣고 파라미터 하나 만들면 거기에 들어있습니다.
        $.get('https://codingapple1.github.io/hello.txt').done(function(data){
            console.log(data)
        });


        //ajax 요청 성공시 .done 안에 있는 코드를 실행
        //ajax 요청 실패시 .fail 안에 있는 코드를 실행
        $.get('https://codingapple1.github.io/price.json')
        .done(function(data){
            console.log(data.price)
        })
        .fail(function(error){
            console.log('실패함')
        });


        //쌩자바스크립트는 fetch 이런거써서 AJAX 요청가능
        //fetch 함수는 Edge 브라우저 이상에서만 동작

        //서버와 데이터를 주고받을 때는 문자만 주고받을 수 있습니다.
        //array, object 이런거 전송불가능 
        //근데 아까 { price : 5000 } 이런 object 무리없이 받아왔죠?
        //어떻게 한거냐면 object를 JSON으로 바꿔서 전송해줘서 그렇습니다.

        fetch('https://codingapple1.github.io/price.json')
            .then(res => res.json())//JSON으로 자료가 도착하면 알아서 array/object 바꿔주는 기능
            .then(function(data){
                console.log(data)
        })
            .catch(function(error){
                console.log('실패함')
        });

        //jQuery의 $.get() 이런건 JSON으로 자료가 도착하면 알아서 array/object 자료로 바꿔줍니다.
        //기본함수 fetch() 이런건 JSON으로 자료가 도착하면 알아서 array/object 자료로 바꿔주지 않습니다.
        //그래서 fetch() 로 가져온 결과를 array/object로 바꾸고 싶으면 res.json() 이런 코드 한 줄 추가하면 됩니다. 
        //그게 귀찮으면 jQuery나 axios 이런 라이브러리 설치하면 ajax가 약간 더 간편









    </script>
</body>
</html>